C51 COMPILER V9.02   LCD1602                                                               02/28/2018 22:29:37 PAGE 1   


C51 COMPILER V9.02, COMPILATION OF MODULE LCD1602
OBJECT MODULE PLACED IN ..\output\lcd1602.obj
COMPILER INVOKED BY: F:\KEIL4\C51\BIN\C51.EXE ..\source\lcd1602.c COMPACT BROWSE DEBUG OBJECTEXTEND PRINT(..\output\lcd1
                    -602.lst) OBJECT(..\output\lcd1602.obj)

line level    source

   1          /*
   2          *******************************************************************************
   3          * 文件名：lcd1602.c
   4          * 描  述：
   5          * 作  者：CLAY
   6          * 版本号：v1.0.0
   7          * 日  期: 
   8          * 备  注：
   9          *         
  10          *******************************************************************************
  11          */
  12          
  13          #include "config.h"
  14          
  15          void LcdWaitReady()
  16          {
  17   1              u8 sta;
  18   1      
  19   1              LCD1602_DB = 0xFF;
  20   1              LCD1602_RS = 0;
  21   1              LCD1602_RW = 1;
  22   1              do{
  23   2                      LCD1602_E = 1;
  24   2                      sta = LCD1602_DB;
  25   2                      LCD1602_E = 0;
  26   2              }while(sta&0x80);       
  27   1      }
  28          
  29          void LcdWriteCmd(u8 cmd)
  30          {
  31   1              LcdWaitReady();
  32   1              LCD1602_RS = 0;
  33   1              LCD1602_RW = 0;
  34   1              LCD1602_DB = cmd;
  35   1              LCD1602_E = 1;
  36   1              LCD1602_E = 0;
  37   1      }
  38          
  39          void LcdWriteDat(u8 dat)
  40          {
  41   1              LcdWaitReady();
  42   1              LCD1602_RS = 1;
  43   1              LCD1602_RW = 0;
  44   1              LCD1602_DB = dat;
  45   1              LCD1602_E = 1;
  46   1              LCD1602_E = 0;
  47   1      }
  48          
  49          void LcdSetCursor(u8 x, u8 y)
  50          {
  51   1              u8 addr;
  52   1      
  53   1              if(y==0)
  54   1              {
C51 COMPILER V9.02   LCD1602                                                               02/28/2018 22:29:37 PAGE 2   

  55   2                      addr = 0x00 + x;
  56   2              }
  57   1              else
  58   1              {
  59   2                      addr = 0x40 + x;
  60   2              }
  61   1              LcdWriteCmd(addr | 0x80);
  62   1      }
  63          
  64          void LcdShowStr(u8 x, u8 y, u8 *str)
  65          {
  66   1              LcdSetCursor(x, y);
  67   1      
  68   1              while(*str != '\0')
  69   1              {
  70   2                      LcdWriteDat(*str++);
  71   2              }
  72   1      }
  73          
  74          void LcdFullClear(u8 x, u8 y, u8 len)
  75          {
  76   1              LcdSetCursor(x, y);
  77   1              while(len--)
  78   1              {
  79   2                      LcdWriteDat(' ');
  80   2              }
  81   1      }
  82          
  83          void LcdAreaClear()
  84          {
  85   1              LcdWriteCmd(0x01);
  86   1      }
  87          
  88          void InitLcd1602()
  89          {
  90   1              LcdWriteCmd(0x38);
  91   1              LcdWriteCmd(0x0C);
  92   1              LcdWriteCmd(0x06);
  93   1              LcdWriteCmd(0x01);
  94   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    169    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----       3
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
